import{S as D,i as C,d as S,s as R,G as L,v as q,o as p,H as I,p as J,q as K,r as k,l as g,u as A,x as E,g as F,I as M,J as O,K as P,k as T,h as U}from"../chunks/index.6c91fde0.js";import{a as v,Z as d,d as f,K as w,J as b,b as y}from"../chunks/store.6207dfa4.js";const{console:Z}=I,j="src/routes/+layout.svelte";function _(n){let o,i;const l=n[1].default,e=L(l,n,n[0],null),c={c:function(){o=J("div"),e&&e.c(),this.h()},l:function(t){o=K(t,"DIV",{class:!0});var a=k(o);e&&e.l(a),a.forEach(g),this.h()},h:function(){A(o,"class","mainContainer s-7IPF32Wcq3s8"),E(o,j,57,0,1746)},m:function(t,a){F(t,o,a),e&&e.m(o,null),i=!0},p:function(t,[a]){e&&e.p&&(!i||a&1)&&M(e,l,t,t[0],i?P(l,t[0],a,null):O(t[0]),null)},i:function(t){i||(T(e,t),i=!0)},o:function(t){U(e,t),i=!1},d:function(t){t&&g(o),e&&e.d(t)}};return S("SvelteRegisterBlock",{block:c,id:_.name,type:"component",source:"",ctx:n}),c}function B(n,o,i){let{$$slots:l={},$$scope:e}=o;q("Layout",l,["default"]);const c=["/","product"];p(()=>(console.log("Mounting"),v.onAuthStateChanged(async a=>{const h=window.location.pathname;if(!a&&!c.includes(h)){window.location.href="/";return}if(a&&h==="/"){window.location.href="/dashboard";return}if(!a)return;let r;const $=d(f,"users",a.uid),m=await w($);if(m.exists())console.log("Fetching User"),r=m.data();else{console.log("Creating User");const u=d(f,"users",a.uid);r={email:a.email,todos:[]},await b(u,r,{merge:!0})}y.update(u=>({...u,user:a,data:r,loading:!1}))})));const s=[];return Object.keys(o).forEach(t=>{!~s.indexOf(t)&&t.slice(0,2)!=="$$"&&t!=="slot"&&Z.warn(`<Layout> was created with unknown prop '${t}'`)}),n.$$set=t=>{"$$scope"in t&&i(0,e=t.$$scope)},n.$capture_state=()=>({onMount:p,auth:v,db:f,getDoc:w,doc:d,setDoc:b,authStore:y,nonAuthRoutes:c}),[e,l]}class N extends D{constructor(o){super(o),C(this,o,B,_,R,{}),S("SvelteRegisterComponent",{component:this,tagName:"Layout",options:o,id:_.name})}}export{N as default};
